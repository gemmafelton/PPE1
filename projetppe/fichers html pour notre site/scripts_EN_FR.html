<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8">

  <title>script-anglais & français</title>
  <!-- Favicons -->
  <link href="assets/img/icon.ico" rel="icon">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <!-- vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  
  <!--  CSS et Js Files pour scripts -->
  <link rel="stylesheet" href="assets/css/monokai-sublime.min.css">
  <script src="assets/js/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
</script>

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Header ======= -->
  <header class="header fixed-top bg-dark">
    <div class="container-fluid d-flex align-items-center justify-content-between">
      <a class="logo">
        <img src="assets/img/groupeicon.jpeg">
        <span>Projet Encadré</span>
      </a>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link" href="..index.html">Accueil</a></li>   <!-- ======= avec presentation ======= -->
          <li><a class="nav-link " href="..index.html#presentation">Présentation</a></li>
          <li class="dropdown"><a class="nav-link"><span>Tableaux</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="tableaux-cn.html">Tableau - CN</a></li>
              <li><a href="Tableaux-FR.html">Tableau - FR</a></li>
              <li><a href="Tableaux-EN.html">Tableau - EN</a></li>
            </ul>
          </li>
          <li class="dropdown scrollto active"><a class="nav-link scrollto active"><span>Script</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="scripts_cn.html">Script - CN</a></li>
              <li class="active"><a href="scripts_EN_FR.html" class="active">Scripts - EN | FR </a></li>
            </ul>
          </li>          
          <li class="dropdown"><a href="#"><span>iTrameur&Nuages</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="itrameur_nuages.html">Chinois</a></li>
              <li><a href="itrameur_nuages_FR.html">Français</a></li>
              <li><a href="itrameur_nuages_EN.html">Anglais</a></li>
            </ul>
          </li>
          <li><a class="nav-link" href="propos.html">Nous</a></li>
          <li><a href="blog.html">Blog</a></li>
          <a href="https://github.com/gemmafelton/PPE-group" class="github"><i class="bi bi-github" style="font-size: 40px;"></i></a>
          </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav>
      <!-- .navbar -->
    </div>
  </header>
  <!-- End Header -->


  <main id="main">

    <section class="modul">
      <div class="bg-image h-100" style="margin-bottom: -60px ; background-image: url('assets/img/wallpapersden.com_programming-coding-language_5120x2880.jpg');">
      <div class="mask align-items-center h-100" style="background-color: rgba(0, 0, 0, 0.25); "> 
        
        <section>
        <header class="section-header">
          <h2>Racial discrimination | Discrimination raciale</h2>
          <p style="color:whitesmoke ;">Les Scripts Anglais et Français</p>
          <p></p>
          <h5 style="margin-top: 70px; color:rgb(241, 240, 240) ;"> Afin de traiter nos corpus anglais et français, Gemma et Tannina ont choisi de faire une partie rassemblée.</h5>
          <h5 style="margin-top: 10px; color:rgb(241, 240, 240) ;"> Les scripts sont basés sur ceux qui ont été étudié pendant les cours et qui ont été modifié par Xiaohua.</h5>
          <h5 style="margin-top: 10px; color:rgb(241, 240, 240) ;"> Afin qu'il n'y ait pas de différences entre nos scripts et notre site web.</h5>
          <h5 style="margin-top: 10px; color:rgb(241, 240, 240) ;"> Néanmoins, nos scripts ne contiennent pas les lignes de script spécifique au chinois, comme la tokénisation. Cela nous permet d'avoir des scripts plus simplifiés.</h5>
          <h5 style="margin-top: 10px; color:rgb(241, 240, 240) ;"> Elles ont bien-sûr modifiés les noms des fichiers ou encore les noms des chemins de fichiers selon leurs contextes et/ou leur langue.</h5>
          <h5 style="margin-top: 10px; color:rgb(241, 240, 240) ;"> Il existe 3 scripts qui sert à chacune à construire une certaine partie de notre corpus :</h5>
        
        </header>
        </section>

        <div class="container">
          <div class="row justify-content-center">
            <div class="col-12">
              <div class="card bg-dark">




    <!-- ======= script-1 : Tableau HTML======= -->   

<div class="row motifs-tabs">          
  <div class="forwhat2 col-lg-4" style="margin: 0 0 20px 50px ; color: rgb(154, 241, 13);">
    <h3>1 - Le script utilisé pour créer les tableaux du corpus anglais et du corpus français :</h3>
    <p style="color:azure; text-align: justify;">Ce script nous permet de créer un tableau contenant les urls que nous avons choisi afin de pouvoir créer un tableau avec nos URLs. On obtiendra aussi un fichier dumps-text qui contiendra le contenu de la page concernée. </p>
    <p style="color:azure; text-align: justify;">Il nous faut trois arguments pour sa création : le fichier script, le fichier urls en format txt et le fichier_tableau en format html.</p>
    <p style="color:azure ; text-align: justify;">En lançant la ligne de commande suivante : bash base traitement_url_base.sh fichier_urls.txt fichier_tableau.txt, on obtiendra un tableau contenant les informations suivantes : </p>
    <p style="color:azure ; text-align: justify;"> Le numéro de ligne, le code de retour ((200 : ✅ ; 400 : ❌)), l'URL, l'encodage, le dumps-html, le dumps-text, les occurrences du mot cible, les contextes, les concordances.</p>
    <br>
    <p>
    <a href="https://github.com/gemmafelton/PPE-group/blob/main/scripts/anglais/base_tableaux_fichier_en.sh" class="github"><i class="bi bi-github" style="font-size: 40px;"></i></a>
    &ensp;&ensp;&ensp;
    <a href="https://github.com/gemmafelton/PPE-group" class="download"><i class="bi bi-download" style="font-size: 40px;"></i></a>
    </p>
  </div>
  
<div class="col-lg-6">
<pre class='script Bash' ><code>

#!/usr/bin/env bash

#===============================================================================
# Ce script est notre programme pour traiter les URLs. Il permet de créer un tableau HTML en sortie avec chaque URL, le code de réponse correspondant .
# Il s'utilise dans le dossier avec le fichier à traiter fichier_urls.txt (avec un URL/ligne) avec la ligne de commande :
# bash traitement_url_base.sh fichier_urls.txt  fichier_tableau.html 

#tableauURL.html est le fichier de sortie du tableau HTML (ici il n'existe pas avant le lancement du script).
#==============================================================================

fichier_urls=$1 # le fichier d'URL en entrée
fichier_tableau=$2 # le fichier HTML en sortie

if [[ $# -ne 2 ]]
then
echo "Ce programme demande exactement deux arguments."
exit
fi

mot="racial discrimination" à modifier selon la langue

echo $fichier_urls;
basename=$(basename -s .txt $fichier_urls)

echo "
&lt;html&gt;
&lt;body&gt;" &gt; $fichier_tableau
echo "&lt;h2&gt;Tableau $basename :&lt;/h2&gt;" &gt;&gt; $fichier_tableau
echo "&lt;br&gt;&lt;/br&gt;" &gt;&gt; $fichier_tableau
echo "&lt;table&gt;" &gt;&gt; $fichier_tableau
echo "&lt;tr&gt;
&lt;th&gt;ligne&lt;/th&gt;
&lt;th&gt;code&lt;/th&gt;
&lt;th&gt;URL&lt;/th&gt;
&lt;th&gt;Encodage&lt;/th&gt;
&lt;th&gt;Occurences&lt;/th&gt;
&lt;th&gt;DumpText&lt;/th&gt;
&lt;th&gt;HTML&lt;/th&gt;
&lt;th&gt;Contexte&lt;/th&gt;
&lt;th&gt;Concordances&lt;/th&gt;
&lt;/tr&gt;" &gt;&gt; $fichier_tableau

lignenum=1;     #On crée une boucle qui continue le traitement des URLs jusqu'à ce qu'il ne reste plus d'URLs à traiter
while read -r URL || [[ -n ${URL} ]]; do      #On utilise curl afin de d'avoir accès aux sites web via un fichier en format html 

# la façon attendue, sans l'option -w de cURL
code=$(curl -ILs $URL | grep -e "^HTTP/" | grep -Eo "[0-9]{3}" | tail -n 1)     # on donne l'expression régulière
charset=$(curl -Ls $URL | grep -Eo "charset=(\w|-)+" |tail | cut -d= -f2 |tail -n 1)
Occurrences=$(lynx -accept_all_cookies -dump $URL | egrep "racial discrimination" -wc) #modifier le mot cible selon la langue : fr/en
echo -e "\tURL : $URL";
echo -e "\tcode : $code";

if [[ ! $charset ]]
then
echo -e "\tencodage non détecté, on prendra UTF-8 par défaut.";
charset="UTF-8";
else
echo -e "\tencodage : $charset";
fi

if [[ $code -eq 200 ]]    #si le code du page web est 200, le contenu sera stocké dans les dossier dumps-text
then
dump=$(lynx -dump -nolist -assume_charset=$charset -display_charset=$charset $URL)
if [[ $charset -ne "UTF-8" && -n "$dump" ]]      # si l'encodage n'est pas l'UTF-8, le script le convertira en UTF-8 avant de continuer
then
dump=$(echo $dump | iconv -f $charset -t UTF-8//IGNORE)   
fi
else    #
echo -e "\tcode différent de 200 utilisation d'un dump vide"      # si le code n'est pas 200, le dumps-text resteront vide
dump=""
charset=""
fi

#les chemins que le programme suivra afin de trier le contenu de nos URLs dans des fichiers assignés sur nos machines - dumps-texts, contextes, etc. 
echo "&lt;tr&gt;
&lt;td&gt;$lignenum&lt;/td&gt;
&lt;td&gt;$code&lt;/td&gt;
&lt;td&gt;&lt;a href=\"$URL\"&gt;$URL&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;$charset&lt;/td&gt;&lt;td&gt;$Occurences&lt;/td&gt;
&lt;td&gt;&lt;a href=\"../dumps-text/en-$lignenum.txt\"&gt;text&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=\"../aspirations/en-$lignenum.html\"&gt;html&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=\"../contextes/en-$lignenum.txt\"&gt;contexte&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=\"../concordances/concordance_en-$lignenum.html\"&gt;concordance&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;" &gt;&gt; $fichier_tableau
echo -e "\t----------------------------------------------------------------"
lignenum=$((lignenum+1));   
done &lt; $fichier_urls
echo "&lt;/table&gt;" &gt;&gt; $fichier_tableau
echo "&lt;/body&gt;&lt;/html&gt;" &gt;&gt; $fichier_tableau
        </code></pre></div>
      </div>





    <!-- ======= script-2 : Concaténation ======= -->   
    

          <div class="row motifs-tabs">          
            <div class="forwhat1 col-lg-4" style="margin: 0 0 20px 50px ; color: rgb(154, 241, 13);">
              <h3>2 - Script de concaténation </h3>
              <p style="color:azure; text-align: justify;"> Ce script nous sert à obtenir les dernières données manquantes du corpus et de les trier dans leurs dossiers respectifs. Il n'a besoin qu'un seul argument : le fichier_urls.txt</p>
              <p style="color:azure; text-align: justify;"> Les dossiers concernés sont : aspirations, dumps-text, contextes (gauche et droit), concordances et occurrences.</p>
              <br>
              <p>
              <a href="https://github.com/gemmafelton/PPE-group/blob/main/scripts/anglais/dumps_asp_conc_cont_en.sh" class="github"><i class="bi bi-github" style="font-size: 40px;"></i></a>
              &ensp;&ensp;&ensp;
              <a href="../scripts/dumps_asp_conc_cont_en.sh" download="dumps_asp_conc_cont_en.sh" class="download"><i class="bi bi-download" style="font-size: 40px;"></i></a>
  
            </p>
            </div>

          <div class="col-lg-6">
          <pre class='script Bash' ><code>

#!/usr/bin/env bash
#===============================================================================
# Ce script est notre programme pour traiter le corpus. Il permet de trier notre corpus dans des dossiers respectifs.
# Il s'utilise avec la ligne de commande suivante : sh dumps_asp_conc_cont_en.sh fichier_urls.txt
#==============================================================================

fichier_urls=$1 # le fichier d'URL en entrée
lignenum=1;
cible="racial discrimination"
while read URL || [[ -n $URL ]];
do
  echo "fichier $lignenum est en cours de traitement."
  curl -o ../../aspirations/anglais/en-$lignenum.html $URL
  lynx -accept_all_cookies -dump $URL &gt; ../../dumps-text/anglais/en-$lignenum.txt
  grep -E -A3 -B3 $cible ../../dumps-text/anglais/en-$lignenum.txt &gt; ../../contexte/anglais/en-$lignenum.txt

  echo "
  &lt;!DOCTYPE html&gt;
  &lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;
    &lt;title&gt;Concordances&lt;/title&gt;
    &lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"&gt;
  &lt;/head&gt;
      &lt;body&gt;
        &lt;table class="table"&gt;
          &lt;thead&gt;
            &lt;tr&gt;
            &lt;th class=\"has-text-right\"&gt;Contexte gauche&lt;/th&gt;
            &lt;th&gt;Cible&lt;/th&gt;
            &lt;th class=\"has-text-left\"&gt;Contexte droit&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
  " &gt; ../../concordances/anglais/concordance_en-$lignenum.html
  # on définit des expressions régulières qui trieront notre corpus
  # on obtiendront les contextes à gauche et à droit du mot cible dans un éventail de 10
  lynx -accept_all_cookies -dump $URL | grep -E -o "(\w+|\W+){0,10}$cible(\W+|\w+){0,10}" |sort|uniq | sed -E "s/(.*)($cible)(.*)/&lt;tr&gt;&lt;td class="has-text-right"&gt;\1&lt;\/td&gt;&lt;td class="has-text-centered"&gt;&lt;strong&gt;\2&lt;\/strong&gt;&lt;\/td&gt;&lt;td class="has-text-left"&gt;\3&lt;\/td&gt;&lt;\/tr&gt;/" &gt;&gt; ../../concordances/anglais/concordance_en-$lignenum.html
  echo "
  &lt;/tbody&gt;
  &lt;/table&gt;
  &lt;/body&gt;
  &lt;/html&gt;
  " &gt;&gt; ../../concordances/anglais/concordance_en-$lignenum.html     #chaque fichier sera crée avec le nom concordance_en suivi par le numéro d'URL   lignenum=$((lignenum+1));
done &lt; $fichier_urls
exit                       
                </code></pre></div>
              </div>

    


    <!-- ======= script-3 iTrameur======= -->   

            <div class="row motifs-tabs">          
              <div class="forwhat1 col-lg-4" style="margin: 0 0 20px 50px ; color: rgb(154, 241, 13);">
                <h3>3 - Script créant le fichier base pour iTrameur</h3>
                <p style="color:azure; text-align: justify;">C'est le script permettant la création du fichier txt brut au bon format d'iTrameur. Avec ce script, on peut concatener tous les contenus des fichiers dumps-texts dans un seul fichier, qui s'appelle "contexte.txt"</p>
                <p style="color:azure; text-align: justify;">Grâce à ce script, les contenus dans context.txt sont annotés avec les délimiteurs suggérés dans le site officiel d'iTrameur.</p>
                <br>
                <p>
                <a href="https://github.com/Simounawind/PPE1/blob/main/projet_final/itrameur/make_itrameur_corpus.sh" class="github"><i class="bi bi-github" style="font-size: 40px;"></i></a>
                &ensp;&ensp;&ensp;
                <a href="https://github.com/gemmafelton/PPE-group" class="download"><i class="bi bi-download" style="font-size: 40px;"></i></a>
                </p>
              </div>
                        
            <div class="col-lg-6">
            <pre class='script python' ><code>

#!/usr/bin/zsh
#===============================================================================
# Ce script traite notre fichier dumps-text en les reunissant tous afin de créer un seul fichier qui s'appellera condumps_entier.txt. 
# Il s'utilise avec la ligne de commande suivante : cat *.txt >>dumps_entier.txt
# On utilise ensuite ce fichier de sortie sur le site : http://www.tal.univ-paris3.fr/trameur/iTrameur/ afin de faire une analyse textométrique de données. 
#==============================================================================
if  [[ $# -ne 2 ]]
then 
    echo "Deux arguments attendus: &lt;dossier&gt; &lt;langue&gt;"
    exit
fi

dossier=$1
langue_abr=$2   

echo "&lt;lang=\"$langue_abr\"&gt;" &gt; contexte.txt
     

for filepath in $(ls -Utr $dossier/$langue_abr-*.txt)
do
    # filepath == dumps-text/en-1.txt
    #  == &gt; pagename =en-1
    echo "$filepath"
    pagename="$(basename -s .txt $filepath)"  #en-1
    echo "&lt;page=\"$pagename\"&gt;" &gt;&gt; contexte.txt
    echo "&lt;text&gt;"  &gt;&gt; contexte.txt

    #on récupère les dumps ou contextes
    # et on écrit à l'intérieur de la base text
    content=$(cat $filepath)
    # ordre important : & en premier
    # sinon : &lt; =&gt; &lt ; =&gt; &amp;lt: 
    content=$(echo "$content" | sed 's/&/&amp;/g')
    content=$(echo "$content" | sed 's/&lt;/&lt;/g')
    content=$(echo "$content" | sed 's/&gt;/&gt;/g')  
    echo "$content" &gt;&gt; contexte.txt
    echo "&lt;/text&gt;" &gt;&gt; contexte.txt
    echo "&lt;/page&gt; §" &gt;&gt; contexte.txt
done
echo "&lt;/lang&gt;" &gt;&gt; contexte.txt
                            </code></pre></div>
                          </div>



  <br><br><br>        
  <br><br><br>        
  <br><br><br>  

</section> 


</main>
<!-- End #main -->

<footer id="footer" class="footer">
  <div class="container">
    <div class="projet">
    Projet (PPE) du TAL M1 22/23 réalisé par <strong><span>CUI Xiaohua</span>, </strong><strong><span>Tannina Hamizi</span></strong> et <strong><span>Gemma Felton</span></strong>
    </div>
    <div class="faitpar">
      Dirigés par @<a href="http://www.tal.univ-paris3.fr/plurital/"><strong>pluriTAL</strong></a> | Site basé sur <a href="https://getbootstrap.com/">Bootstrap</a> | <a href="scripts_cn.html#sourceimage">Sources des images du site</a>
      <div class="faitpar">
        <a href="https://github.com/gemmafelton/PPE-group" class="github"><i class="bi bi-github"></i>
      </div>
    </div>
  </div>
</footer>


<script src="site_groupe/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="site_groupe/assets/js/main.js"></script>

</body>

</html>